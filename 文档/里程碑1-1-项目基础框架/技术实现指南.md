# æŠ€æœ¯å®ç°æŒ‡å—

## ğŸ“‹ æ–‡æ¡£æ¦‚è¿°

**æ–‡æ¡£ç”¨é€”**: é‡Œç¨‹ç¢‘1-1ä¸»çª—å£å’Œç»„ä»¶å®ç°çš„æŠ€æœ¯æ–¹æ¡ˆå’Œä»£ç ç»“æ„  
**æŠ€æœ¯æ ˆ**: WPF + .NET 8.0 + MVVMæ¨¡å¼  
**è®¾è®¡æ¨¡å¼**: åˆ†å±‚æ¶æ„ + ä¾èµ–æ³¨å…¥ + å‘½ä»¤æ¨¡å¼  

## ğŸ—ï¸ é¡¹ç›®ç»“æ„è®¾è®¡

### æ–‡ä»¶å¤¹ç»“æ„
```
AINovelAgent/
â”œâ”€â”€ Models/                     # æ•°æ®æ¨¡å‹å±‚
â”‚   â”œâ”€â”€ Base/                  # åŸºç¡€æ¨¡å‹
â”‚   â”œâ”€â”€ Configuration/         # é…ç½®æ¨¡å‹
â”‚   â””â”€â”€ Project/               # é¡¹ç›®æ¨¡å‹
â”œâ”€â”€ Services/                  # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â”œâ”€â”€ Interfaces/            # æœåŠ¡æ¥å£
â”‚   â”œâ”€â”€ Configuration/         # é…ç½®æœåŠ¡
â”‚   â”œâ”€â”€ Logging/               # æ—¥å¿—æœåŠ¡
â”‚   â””â”€â”€ File/                  # æ–‡ä»¶æœåŠ¡
â”œâ”€â”€ ViewModels/                # è§†å›¾æ¨¡å‹å±‚
â”‚   â”œâ”€â”€ Base/                  # åŸºç¡€è§†å›¾æ¨¡å‹
â”‚   â”œâ”€â”€ Main/                  # ä¸»çª—å£è§†å›¾æ¨¡å‹
â”‚   â””â”€â”€ Dialogs/               # å¯¹è¯æ¡†è§†å›¾æ¨¡å‹
â”œâ”€â”€ Views/                     # è§†å›¾å±‚
â”‚   â”œâ”€â”€ Base/                  # åŸºç¡€è§†å›¾
â”‚   â”œâ”€â”€ Main/                  # ä¸»çª—å£è§†å›¾
â”‚   â”œâ”€â”€ Dialogs/               # å¯¹è¯æ¡†è§†å›¾
â”‚   â””â”€â”€ Controls/              # è‡ªå®šä¹‰æ§ä»¶
â”œâ”€â”€ Utils/                     # å·¥å…·ç±»
â”‚   â”œâ”€â”€ Commands/              # å‘½ä»¤å®ç°
â”‚   â”œâ”€â”€ Converters/            # å€¼è½¬æ¢å™¨
â”‚   â””â”€â”€ Extensions/            # æ‰©å±•æ–¹æ³•
â”œâ”€â”€ Resources/                 # èµ„æºæ–‡ä»¶
â”‚   â”œâ”€â”€ Styles/                # æ ·å¼èµ„æº
â”‚   â”œâ”€â”€ Themes/                # ä¸»é¢˜èµ„æº
â”‚   â””â”€â”€ Images/                # å›¾åƒèµ„æº
â””â”€â”€ App.xaml                   # åº”ç”¨ç¨‹åºå…¥å£
```

## ğŸ”§ æ ¸å¿ƒå®ç°æ–¹æ¡ˆ

### 1. ä¸»çª—å£å¸ƒå±€å®ç°

#### XAMLç»“æ„è®¾è®¡
```xml
<Window x:Class="AINovelAgent.Views.Main.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="AIå°è¯´å†™ä½œåŠ©æ‰‹" Height="800" Width="1200"
        WindowStartupLocation="CenterScreen">
    
    <DockPanel>
        <!-- èœå•æ  -->
        <Menu DockPanel.Dock="Top" Style="{StaticResource MainMenuStyle}">
            <!-- èœå•é¡¹å†…å®¹ -->
        </Menu>
        
        <!-- å·¥å…·æ  -->
        <ToolBar DockPanel.Dock="Top" Style="{StaticResource MainToolBarStyle}">
            <!-- å·¥å…·æ æŒ‰é’® -->
        </ToolBar>
        
        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="250" MinWidth="200" MaxWidth="400"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <!-- ä¾§è¾¹æ  -->
            <Border Grid.Column="0" Style="{StaticResource SideBarStyle}">
                <!-- ä¾§è¾¹æ å†…å®¹ -->
            </Border>
            
            <!-- å·¥ä½œåŒºåŸŸ -->
            <Border Grid.Column="1" Style="{StaticResource WorkAreaStyle}">
                <!-- å·¥ä½œåŒºåŸŸå†…å®¹ -->
            </Border>
        </Grid>
        
        <!-- çŠ¶æ€æ  -->
        <StatusBar DockPanel.Dock="Bottom" Style="{StaticResource MainStatusBarStyle}">
            <!-- çŠ¶æ€æ å†…å®¹ -->
        </StatusBar>
    </DockPanel>
</Window>
```

#### ä»£ç åå°å®ç°
```csharp
namespace AINovelAgent.Views.Main
{
    public partial class MainWindow : Window
    {
        private readonly MainWindowViewModel _viewModel;
        
        public MainWindow()
        {
            InitializeComponent();
            _viewModel = new MainWindowViewModel();
            DataContext = _viewModel;
            
            // æ³¨å†Œäº‹ä»¶å¤„ç†
            RegisterEventHandlers();
        }
        
        private void RegisterEventHandlers()
        {
            // çª—å£å¤§å°æ”¹å˜äº‹ä»¶
            SizeChanged += MainWindow_SizeChanged;
            
            // çª—å£å…³é—­äº‹ä»¶
            Closing += MainWindow_Closing;
        }
        
        private void MainWindow_SizeChanged(object sender, SizeChangedEventArgs e)
        {
            // å“åº”å¼å¸ƒå±€å¤„ç†
            _viewModel.HandleWindowSizeChanged(e.NewSize);
        }
        
        private void MainWindow_Closing(object sender, CancelEventArgs e)
        {
            // ä¿å­˜çª—å£çŠ¶æ€
            _viewModel.SaveWindowState();
        }
    }
}
```

### 2. MVVMæ¶æ„å®ç°

#### åŸºç¡€è§†å›¾æ¨¡å‹
```csharp
namespace AINovelAgent.ViewModels.Base
{
    public abstract class BaseViewModel : INotifyPropertyChanged, IDisposable
    {
        private bool _disposed = false;
        
        public event PropertyChangedEventHandler PropertyChanged;
        
        protected virtual void OnPropertyChanged([CallerMemberName] string propertyName = null)
        {
            PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(propertyName));
        }
        
        protected virtual bool SetProperty<T>(ref T field, T value, [CallerMemberName] string propertyName = null)
        {
            if (EqualityComparer<T>.Default.Equals(field, value)) return false;
            field = value;
            OnPropertyChanged(propertyName);
            return true;
        }
        
        public virtual void Dispose()
        {
            if (!_disposed)
            {
                _disposed = true;
                Dispose(true);
                GC.SuppressFinalize(this);
            }
        }
        
        protected virtual void Dispose(bool disposing)
        {
            // å­ç±»é‡å†™æ­¤æ–¹æ³•è¿›è¡Œèµ„æºæ¸…ç†
        }
    }
}
```

#### ä¸»çª—å£è§†å›¾æ¨¡å‹
```csharp
namespace AINovelAgent.ViewModels.Main
{
    public class MainWindowViewModel : BaseViewModel
    {
        private readonly IConfigurationService _configService;
        private readonly ILoggingService _loggingService;
        
        // å±æ€§
        private bool _isSideBarVisible = true;
        private bool _isToolBarVisible = true;
        private bool _isStatusBarVisible = true;
        private string _statusMessage = "å°±ç»ª";
        private double _progressValue = 0;
        private bool _isProgressVisible = false;
        
        // å‘½ä»¤
        public ICommand NewProjectCommand { get; }
        public ICommand OpenFileCommand { get; }
        public ICommand SaveCommand { get; }
        public ICommand ToggleSideBarCommand { get; }
        public ICommand ToggleToolBarCommand { get; }
        public ICommand ToggleStatusBarCommand { get; }
        public ICommand SettingsCommand { get; }
        public ICommand HelpCommand { get; }
        
        public MainWindowViewModel(
            IConfigurationService configService,
            ILoggingService loggingService)
        {
            _configService = configService;
            _loggingService = loggingService;
            
            // åˆå§‹åŒ–å‘½ä»¤
            InitializeCommands();
            
            // åŠ è½½é…ç½®
            LoadConfiguration();
        }
        
        private void InitializeCommands()
        {
            NewProjectCommand = new RelayCommand(ExecuteNewProject, CanExecuteNewProject);
            OpenFileCommand = new RelayCommand(ExecuteOpenFile, CanExecuteOpenFile);
            SaveCommand = new RelayCommand(ExecuteSave, CanExecuteSave);
            ToggleSideBarCommand = new RelayCommand(ExecuteToggleSideBar);
            ToggleToolBarCommand = new RelayCommand(ExecuteToggleToolBar);
            ToggleStatusBarCommand = new RelayCommand(ExecuteToggleStatusBar);
            SettingsCommand = new RelayCommand(ExecuteSettings);
            HelpCommand = new RelayCommand(ExecuteHelp);
        }
        
        // å±æ€§å®ç°
        public bool IsSideBarVisible
        {
            get => _isSideBarVisible;
            set => SetProperty(ref _isSideBarVisible, value);
        }
        
        public bool IsToolBarVisible
        {
            get => _isToolBarVisible;
            set => SetProperty(ref _isToolBarVisible, value);
        }
        
        public bool IsStatusBarVisible
        {
            get => _isStatusBarVisible;
            set => SetProperty(ref _isStatusBarVisible, value);
        }
        
        public string StatusMessage
        {
            get => _statusMessage;
            set => SetProperty(ref _statusMessage, value);
        }
        
        public double ProgressValue
        {
            get => _progressValue;
            set => SetProperty(ref _progressValue, value);
        }
        
        public bool IsProgressVisible
        {
            get => _isProgressVisible;
            set => SetProperty(ref _isProgressVisible, value);
        }
        
        // å‘½ä»¤æ‰§è¡Œæ–¹æ³•
        private void ExecuteNewProject()
        {
            try
            {
                _loggingService.LogInformation("æ‰§è¡Œæ–°å»ºé¡¹ç›®å‘½ä»¤");
                // å®ç°æ–°å»ºé¡¹ç›®é€»è¾‘
                StatusMessage = "æ­£åœ¨åˆ›å»ºæ–°é¡¹ç›®...";
                // TODO: å®ç°æ–°å»ºé¡¹ç›®åŠŸèƒ½
            }
            catch (Exception ex)
            {
                _loggingService.LogError(ex, "æ–°å»ºé¡¹ç›®å¤±è´¥");
                StatusMessage = "æ–°å»ºé¡¹ç›®å¤±è´¥";
            }
        }
        
        private bool CanExecuteNewProject()
        {
            return true; // æ ¹æ®å®é™…ä¸šåŠ¡é€»è¾‘åˆ¤æ–­
        }
        
        private void ExecuteOpenFile()
        {
            try
            {
                _loggingService.LogInformation("æ‰§è¡Œæ‰“å¼€æ–‡ä»¶å‘½ä»¤");
                // å®ç°æ‰“å¼€æ–‡ä»¶é€»è¾‘
                StatusMessage = "æ­£åœ¨æ‰“å¼€æ–‡ä»¶...";
                // TODO: å®ç°æ‰“å¼€æ–‡ä»¶åŠŸèƒ½
            }
            catch (Exception ex)
            {
                _loggingService.LogError(ex, "æ‰“å¼€æ–‡ä»¶å¤±è´¥");
                StatusMessage = "æ‰“å¼€æ–‡ä»¶å¤±è´¥";
            }
        }
        
        private bool CanExecuteOpenFile()
        {
            return true; // æ ¹æ®å®é™…ä¸šåŠ¡é€»è¾‘åˆ¤æ–­
        }
        
        private void ExecuteSave()
        {
            try
            {
                _loggingService.LogInformation("æ‰§è¡Œä¿å­˜å‘½ä»¤");
                // å®ç°ä¿å­˜é€»è¾‘
                StatusMessage = "æ­£åœ¨ä¿å­˜...";
                // TODO: å®ç°ä¿å­˜åŠŸèƒ½
            }
            catch (Exception ex)
            {
                _loggingService.LogError(ex, "ä¿å­˜å¤±è´¥");
                StatusMessage = "ä¿å­˜å¤±è´¥";
            }
        }
        
        private bool CanExecuteSave()
        {
            return true; // æ ¹æ®å®é™…ä¸šåŠ¡é€»è¾‘åˆ¤æ–­
        }
        
        private void ExecuteToggleSideBar()
        {
            IsSideBarVisible = !IsSideBarVisible;
            _loggingService.LogInformation($"ä¾§è¾¹æ æ˜¾ç¤ºçŠ¶æ€: {IsSideBarVisible}");
        }
        
        private void ExecuteToggleToolBar()
        {
            IsToolBarVisible = !IsToolBarVisible;
            _loggingService.LogInformation($"å·¥å…·æ æ˜¾ç¤ºçŠ¶æ€: {IsToolBarVisible}");
        }
        
        private void ExecuteToggleStatusBar()
        {
            IsStatusBarVisible = !IsStatusBarVisible;
            _loggingService.LogInformation($"çŠ¶æ€æ æ˜¾ç¤ºçŠ¶æ€: {IsStatusBarVisible}");
        }
        
        private void ExecuteSettings()
        {
            try
            {
                _loggingService.LogInformation("æ‰“å¼€è®¾ç½®çª—å£");
                // TODO: å®ç°è®¾ç½®çª—å£æ‰“å¼€é€»è¾‘
                StatusMessage = "æ­£åœ¨æ‰“å¼€è®¾ç½®...";
            }
            catch (Exception ex)
            {
                _loggingService.LogError(ex, "æ‰“å¼€è®¾ç½®çª—å£å¤±è´¥");
                StatusMessage = "æ‰“å¼€è®¾ç½®å¤±è´¥";
            }
        }
        
        private void ExecuteHelp()
        {
            try
            {
                _loggingService.LogInformation("æ‰“å¼€å¸®åŠ©çª—å£");
                // TODO: å®ç°å¸®åŠ©çª—å£æ‰“å¼€é€»è¾‘
                StatusMessage = "æ­£åœ¨æ‰“å¼€å¸®åŠ©...";
            }
            catch (Exception ex)
            {
                _loggingService.LogError(ex, "æ‰“å¼€å¸®åŠ©çª—å£å¤±è´¥");
                StatusMessage = "æ‰“å¼€å¸®åŠ©å¤±è´¥";
            }
        }
        
        // å…¬å…±æ–¹æ³•
        public void HandleWindowSizeChanged(Size newSize)
        {
            // æ ¹æ®çª—å£å¤§å°è°ƒæ•´å¸ƒå±€
            if (newSize.Width < 800)
            {
                IsSideBarVisible = false;
            }
            else if (newSize.Width > 1200)
            {
                IsSideBarVisible = true;
            }
        }
        
        public void SaveWindowState()
        {
            try
            {
                var settings = new Dictionary<string, object>
                {
                    ["IsSideBarVisible"] = IsSideBarVisible,
                    ["IsToolBarVisible"] = IsToolBarVisible,
                    ["IsStatusBarVisible"] = IsStatusBarVisible
                };
                
                _configService.SaveSettings("WindowState", settings);
                _loggingService.LogInformation("çª—å£çŠ¶æ€å·²ä¿å­˜");
            }
            catch (Exception ex)
            {
                _loggingService.LogError(ex, "ä¿å­˜çª—å£çŠ¶æ€å¤±è´¥");
            }
        }
        
        private void LoadConfiguration()
        {
            try
            {
                var settings = _configService.GetSettings("WindowState");
                if (settings != null)
                {
                    IsSideBarVisible = settings.GetValueOrDefault("IsSideBarVisible", true);
                    IsToolBarVisible = settings.GetValueOrDefault("IsToolBarVisible", true);
                    IsStatusBarVisible = settings.GetValueOrDefault("IsStatusBarVisible", true);
                }
                
                _loggingService.LogInformation("çª—å£é…ç½®å·²åŠ è½½");
            }
            catch (Exception ex)
            {
                _loggingService.LogError(ex, "åŠ è½½çª—å£é…ç½®å¤±è´¥");
            }
        }
    }
}
```

### 3. æ ·å¼ç³»ç»Ÿå®ç°

#### åŸºç¡€æ ·å¼èµ„æºå­—å…¸
```xml
<!-- Resources/Styles/BaseStyles.xaml -->
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    
    <!-- é¢œè‰²å®šä¹‰ -->
    <Color x:Key="PrimaryColor">#2196F3</Color>
    <Color x:Key="PrimaryLightColor">#64B5F6</Color>
    <Color x:Key="PrimaryDarkColor">#1976D2</Color>
    <Color x:Key="AccentColor">#FF9800</Color>
    <Color x:Key="SuccessColor">#4CAF50</Color>
    <Color x:Key="WarningColor">#FFC107</Color>
    <Color x:Key="ErrorColor">#F44336</Color>
    <Color x:Key="BackgroundColor">#FAFAFA</Color>
    <Color x:Key="TextColor">#212121</Color>
    
    <!-- ç”»åˆ·å®šä¹‰ -->
    <SolidColorBrush x:Key="PrimaryBrush" Color="{StaticResource PrimaryColor}"/>
    <SolidColorBrush x:Key="PrimaryLightBrush" Color="{StaticResource PrimaryLightColor}"/>
    <SolidColorBrush x:Key="PrimaryDarkBrush" Color="{StaticResource PrimaryDarkColor}"/>
    <SolidColorBrush x:Key="AccentBrush" Color="{StaticResource AccentColor}"/>
    <SolidColorBrush x:Key="SuccessBrush" Color="{StaticResource SuccessColor}"/>
    <SolidColorBrush x:Key="WarningBrush" Color="{StaticResource WarningColor}"/>
    <SolidColorBrush x:Key="ErrorBrush" Color="{StaticResource ErrorColor}"/>
    <SolidColorBrush x:Key="BackgroundBrush" Color="{StaticResource BackgroundColor}"/>
    <SolidColorBrush x:Key="TextBrush" Color="{StaticResource TextColor}"/>
    
    <!-- æŒ‰é’®æ ·å¼ -->
    <Style x:Key="BaseButtonStyle" TargetType="Button">
        <Setter Property="Background" Value="{StaticResource PrimaryBrush}"/>
        <Setter Property="Foreground" Value="White"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="Padding" Value="12,8"/>
        <Setter Property="FontFamily" Value="Segoe UI"/>
        <Setter Property="FontSize" Value="12"/>
        <Setter Property="FontWeight" Value="Medium"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border Background="{TemplateBinding Background}"
                            CornerRadius="4"
                            Padding="{TemplateBinding Padding}">
                        <ContentPresenter HorizontalAlignment="Center" 
                                        VerticalAlignment="Center"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" Value="{StaticResource PrimaryLightBrush}"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter Property="Background" Value="{StaticResource PrimaryDarkBrush}"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Opacity" Value="0.6"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    
    <!-- èœå•æ ·å¼ -->
    <Style x:Key="MainMenuStyle" TargetType="Menu">
        <Setter Property="Background" Value="#F5F5F5"/>
        <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
        <Setter Property="FontFamily" Value="Segoe UI"/>
        <Setter Property="FontSize" Value="11"/>
    </Style>
    
    <!-- å·¥å…·æ æ ·å¼ -->
    <Style x:Key="MainToolBarStyle" TargetType="ToolBar">
        <Setter Property="Background" Value="#F5F5F5"/>
        <Setter Property="BorderBrush" Value="#E0E0E0"/>
        <Setter Property="BorderThickness" Value="0,0,0,1"/>
    </Style>
    
    <!-- ä¾§è¾¹æ æ ·å¼ -->
    <Style x:Key="SideBarStyle" TargetType="Border">
        <Setter Property="Background" Value="White"/>
        <Setter Property="BorderBrush" Value="#E0E0E0"/>
        <Setter Property="BorderThickness" Value="0,0,1,0"/>
    </Style>
    
    <!-- å·¥ä½œåŒºåŸŸæ ·å¼ -->
    <Style x:Key="WorkAreaStyle" TargetType="Border">
        <Setter Property="Background" Value="{StaticResource BackgroundBrush}"/>
    </Style>
    
    <!-- çŠ¶æ€æ æ ·å¼ -->
    <Style x:Key="MainStatusBarStyle" TargetType="StatusBar">
        <Setter Property="Background" Value="#F5F5F5"/>
        <Setter Property="BorderBrush" Value="#E0E0E0"/>
        <Setter Property="BorderThickness" Value="0,1,0,0"/>
        <Setter Property="FontFamily" Value="Segoe UI"/>
        <Setter Property="FontSize" Value="11"/>
    </Style>
    
</ResourceDictionary>
```

### 4. æœåŠ¡å±‚å®ç°

#### é…ç½®æœåŠ¡æ¥å£
```csharp
namespace AINovelAgent.Services.Interfaces
{
    public interface IConfigurationService
    {
        T GetValue<T>(string key, T defaultValue = default);
        void SetValue<T>(string key, T value);
        Dictionary<string, object> GetSettings(string section);
        void SaveSettings(string section, Dictionary<string, object> settings);
        void LoadConfiguration();
        void SaveConfiguration();
    }
}
```

#### é…ç½®æœåŠ¡å®ç°
```csharp
namespace AINovelAgent.Services.Configuration
{
    public class ConfigurationService : IConfigurationService
    {
        private readonly ILogger<ConfigurationService> _logger;
        private readonly string _configFilePath;
        private IConfiguration _configuration;
        
        public ConfigurationService(ILogger<ConfigurationService> logger)
        {
            _logger = logger;
            _configFilePath = Path.Combine(
                Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData),
                "AINovelAgent",
                "appsettings.json");
            
            LoadConfiguration();
        }
        
        public T GetValue<T>(string key, T defaultValue = default)
        {
            try
            {
                var value = _configuration[key];
                if (string.IsNullOrEmpty(value))
                    return defaultValue;
                
                return (T)Convert.ChangeType(value, typeof(T));
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "è·å–é…ç½®å€¼å¤±è´¥: {Key}", key);
                return defaultValue;
            }
        }
        
        public void SetValue<T>(string key, T value)
        {
            try
            {
                // è¿™é‡Œéœ€è¦å®ç°é…ç½®å€¼çš„è®¾ç½®é€»è¾‘
                // å¯ä»¥ä½¿ç”¨å†…å­˜é…ç½®æˆ–è€…é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶
                _logger.LogInformation("è®¾ç½®é…ç½®å€¼: {Key} = {Value}", key, value);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "è®¾ç½®é…ç½®å€¼å¤±è´¥: {Key}", key);
            }
        }
        
        public Dictionary<string, object> GetSettings(string section)
        {
            try
            {
                var sectionConfig = _configuration.GetSection(section);
                var settings = new Dictionary<string, object>();
                
                foreach (var child in sectionConfig.GetChildren())
                {
                    settings[child.Key] = child.Value;
                }
                
                return settings;
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "è·å–é…ç½®èŠ‚å¤±è´¥: {Section}", section);
                return new Dictionary<string, object>();
            }
        }
        
        public void SaveSettings(string section, Dictionary<string, object> settings)
        {
            try
            {
                // è¿™é‡Œéœ€è¦å®ç°é…ç½®ä¿å­˜é€»è¾‘
                // å¯ä»¥å°†é…ç½®ä¿å­˜åˆ°JSONæ–‡ä»¶æˆ–è€…æ•°æ®åº“
                _logger.LogInformation("ä¿å­˜é…ç½®èŠ‚: {Section}", section);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "ä¿å­˜é…ç½®èŠ‚å¤±è´¥: {Section}", section);
            }
        }
        
        public void LoadConfiguration()
        {
            try
            {
                var configBuilder = new ConfigurationBuilder();
                
                if (File.Exists(_configFilePath))
                {
                    configBuilder.AddJsonFile(_configFilePath, optional: false, reloadOnChange: true);
                }
                
                configBuilder.AddEnvironmentVariables();
                configBuilder.AddInMemoryCollection(GetDefaultConfiguration());
                
                _configuration = configBuilder.Build();
                
                _logger.LogInformation("é…ç½®å·²åŠ è½½");
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "åŠ è½½é…ç½®å¤±è´¥");
                // ä½¿ç”¨é»˜è®¤é…ç½®
                _configuration = new ConfigurationBuilder()
                    .AddInMemoryCollection(GetDefaultConfiguration())
                    .Build();
            }
        }
        
        public void SaveConfiguration()
        {
            try
            {
                var configDir = Path.GetDirectoryName(_configFilePath);
                if (!Directory.Exists(configDir))
                {
                    Directory.CreateDirectory(configDir);
                }
                
                // è¿™é‡Œéœ€è¦å®ç°é…ç½®ä¿å­˜é€»è¾‘
                _logger.LogInformation("é…ç½®å·²ä¿å­˜");
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "ä¿å­˜é…ç½®å¤±è´¥");
            }
        }
        
        private Dictionary<string, string> GetDefaultConfiguration()
        {
            return new Dictionary<string, string>
            {
                ["Logging:LogLevel:Default"] = "Information",
                ["Logging:LogLevel:Microsoft"] = "Warning",
                ["App:Name"] = "AIå°è¯´å†™ä½œåŠ©æ‰‹",
                ["App:Version"] = "1.0.0",
                ["AI:DefaultModel"] = "llama2",
                ["AI:ApiEndpoint"] = "http://localhost:11434",
                ["File:SupportedFormats"] = ".txt,.md,.docx,.pdf",
                ["UI:Theme"] = "Light",
                ["UI:Language"] = "zh-CN"
            };
        }
    }
}
```

## ğŸš€ å®ç°æ­¥éª¤

### ç¬¬1æ­¥ï¼šåˆ›å»ºé¡¹ç›®ç»“æ„
1. åˆ›å»ºä¸Šè¿°æ–‡ä»¶å¤¹ç»“æ„
2. åˆ›å»ºåŸºç¡€ç±»å’Œæ¥å£
3. è®¾ç½®é¡¹ç›®å¼•ç”¨å’Œä¾èµ–

### ç¬¬2æ­¥ï¼šå®ç°åŸºç¡€æœåŠ¡
1. å®ç°é…ç½®æœåŠ¡
2. å®ç°æ—¥å¿—æœåŠ¡
3. åˆ›å»ºæœåŠ¡æ¥å£

### ç¬¬3æ­¥ï¼šå®ç°è§†å›¾æ¨¡å‹
1. åˆ›å»ºåŸºç¡€è§†å›¾æ¨¡å‹
2. å®ç°ä¸»çª—å£è§†å›¾æ¨¡å‹
3. å®ç°å‘½ä»¤ç»‘å®š

### ç¬¬4æ­¥ï¼šåˆ›å»ºXAMLç•Œé¢
1. åˆ›å»ºä¸»çª—å£XAML
2. å®ç°åŸºç¡€å¸ƒå±€
3. ç»‘å®šè§†å›¾æ¨¡å‹

### ç¬¬5æ­¥ï¼šå®ç°æ ·å¼ç³»ç»Ÿ
1. åˆ›å»ºæ ·å¼èµ„æºå­—å…¸
2. åº”ç”¨æ ·å¼åˆ°æ§ä»¶
3. æµ‹è¯•è§†è§‰æ•ˆæœ

### ç¬¬6æ­¥ï¼šåŠŸèƒ½æµ‹è¯•
1. æµ‹è¯•åŸºç¡€åŠŸèƒ½
2. æµ‹è¯•å“åº”å¼å¸ƒå±€
3. æµ‹è¯•æ ·å¼æ•ˆæœ

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æ€§èƒ½ä¼˜åŒ–**: é¿å…è¿‡åº¦å¤æ‚çš„ç»‘å®šï¼Œä½¿ç”¨è™šæ‹ŸåŒ–åˆ—è¡¨
2. **å†…å­˜ç®¡ç†**: åŠæ—¶é‡Šæ”¾èµ„æºï¼Œé¿å…å†…å­˜æ³„æ¼
3. **å¼‚å¸¸å¤„ç†**: æ‰€æœ‰å…¬å…±æ–¹æ³•éƒ½è¦æœ‰é€‚å½“çš„å¼‚å¸¸å¤„ç†
4. **æ—¥å¿—è®°å½•**: å…³é”®æ“ä½œéƒ½è¦è®°å½•æ—¥å¿—ï¼Œä¾¿äºè°ƒè¯•
5. **é…ç½®ç®¡ç†**: ä½¿ç”¨é…ç½®æ–‡ä»¶ç®¡ç†è®¾ç½®ï¼Œé¿å…ç¡¬ç¼–ç 
6. **æ ·å¼ç»Ÿä¸€**: ä¿æŒæ‰€æœ‰æ§ä»¶çš„æ ·å¼é£æ ¼ä¸€è‡´
7. **å“åº”å¼è®¾è®¡**: æ”¯æŒä¸åŒçª—å£å¤§å°çš„å¸ƒå±€é€‚é…
8. **å¯è®¿é—®æ€§**: æ”¯æŒé”®ç›˜å¯¼èˆªå’Œå±å¹•é˜…è¯»å™¨
