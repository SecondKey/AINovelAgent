# 窗口与组件清单

## 📋 文档概述

**文档用途**: 里程碑1-1需要实现的所有窗口和功能组件的详细清单  
**设计目标**: 明确开发范围，确保不遗漏重要功能  
**分类方式**: 按功能模块和重要性进行分类  

## 🖥️ 主窗口 (MainWindow)

### 核心布局组件
- [x] **DockingManager** - 可停靠主布局容器（替代 DockPanel）
- [x] **MenuBar** - 菜单栏（已拆分控件）
- [x] **SideBar** - 左侧快捷窗口（QuickPanel）
- [x] **WorkArea** - 中间主编辑窗口（MainEditor）
- [x] **AIPanel** - 右侧AI聊天窗口（AIChat）
- [x] **StatusBar** - 状态栏（已拆分控件）

### 菜单栏组件
- [x] **FileMenu** - 文件菜单（已实现UI骨架）
  - [ ] NewProjectMenuItem - 新建项目
  - [ ] OpenProjectMenuItem - 打开项目
  - [ ] SaveProjectMenuItem - 保存项目
  - [ ] SaveAsMenuItem - 另存为
  - [ ] RecentProjectsMenuItem - 最近项目
  - [ ] ExitMenuItem - 退出

- [x] **EditMenu** - 编辑菜单（已实现UI骨架）
  - [ ] UndoMenuItem - 撤销
  - [ ] RedoMenuItem - 重做
  - [ ] CutMenuItem - 剪切
  - [ ] CopyMenuItem - 复制
  - [ ] PasteMenuItem - 粘贴
  - [ ] FindMenuItem - 查找
  - [ ] ReplaceMenuItem - 替换

- [x] **ViewMenu** - 视图菜单（已实现UI骨架）
  - [ ] SideBarToggleMenuItem - 侧边栏显示/隐藏
  - [ ] ToolBarToggleMenuItem - 工具栏显示/隐藏
  - [ ] StatusBarToggleMenuItem - 状态栏显示/隐藏
  - [ ] FullScreenMenuItem - 全屏模式

- [x] **ToolsMenu** - 工具菜单（已实现UI骨架）
  - [ ] SettingsMenuItem - 设置
  - [ ] AIModelManagementMenuItem - AI模型管理
  - [ ] KnowledgeBaseMenuItem - 知识库管理
  - [ ] AnalysisReportMenuItem - 分析报告

- [x] **HelpMenu** - 帮助菜单（已实现UI骨架）
  - [ ] UserManualMenuItem - 用户手册
  - [ ] AboutMenuItem - 关于
  - [ ] CheckUpdateMenuItem - 检查更新
  - [ ] FeedbackMenuItem - 反馈建议

### 侧边栏组件
- [x] **SideBarContainer** - 侧边栏容器（QuickPanelView，已实现UI骨架）
  - [ ] SideBarToggleButton - 折叠/展开按钮
  - [x] ProjectNavigationPanel - 项目导航面板（UI骨架）
    - [ ] ProjectTreeView - 项目树形视图
    - [ ] FileListView - 文件列表视图
    - [ ] ChapterManagementPanel - 章节管理面板
    - [ ] TagClassificationPanel - 标签分类面板
  - [x] QuickToolsPanel - 快速工具面板（UI骨架）
    - [ ] AIAssistantStatus - AI助手状态
    - [ ] RecentFilesList - 最近文件列表
    - [ ] FavoritesList - 收藏夹
    - [ ] SearchBox - 搜索框
  - [x] WorkspaceSwitchPanel - 工作区切换面板（UI骨架）
    - [ ] WritingModeButton - 写作模式按钮
    - [ ] AnalysisModeButton - 分析模式按钮
    - [ ] ManagementModeButton - 管理模式按钮

### 主工作区域组件
- [x] **WorkAreaContainer** - 工作区域容器（WelcomePage/Editor，UI骨架）
  - [x] WelcomePage - 欢迎页面（UI骨架）
  - [ ] AppLogo - 应用Logo
  - [ ] AppName - 应用名称
  - [ ] QuickStartGuide - 快速开始指南
  - [ ] RecentProjectsList - 最近项目列表
  - [ ] FeatureNavigationCards - 功能导航卡片
  - [x] FileEditorArea - 文件编辑区（UI骨架）
    - [x] TextEditor - 文本编辑器（带行/列/字数显示）
    - [x] FormatToolBar - 格式工具栏（UI骨架）
    - [x] LineNumberDisplay - 行号显示（占位UI）
  - [ ] ScrollBar - 滚动条
  - [x] AIChatArea - AI对话区（UI骨架）
    - [x] ChatHistory - 对话历史
    - [x] InputBox - 输入框
    - [x] SendButton - 发送按钮
    - [ ] ModelSelector - 模型选择器

### AI对话组件
- [x] AIChatArea - AI对话区（UI骨架）
  - [x] ChatBox - 对话框
    - [x] ChatHistory - 对话历史
  - [x] InputBox - 输入框
    - [x] InputTextBox - 输入文本
    - [x] SendButton - 发送按钮
    - [ ] ModelSelector - 模型选择器

### 状态栏组件
- [x] **StatusBarContainer** - 状态栏容器（MainStatusBar，UI+消息订阅）
  - [x] StatusMessage - 状态消息（主题：Status/TextUpdated，载荷：string）
  - [x] ProgressBar - 进度条（主题：Status/Progress，载荷：double|bool）
  - [x] SystemStatus - 系统状态（主题：Status/System，载荷：string）

## 🔧 功能窗口

### 设置窗口 (SettingsWindow)
- [ ] **SettingsWindow** - 设置主窗口
  - [ ] GeneralSettingsTab - 常规设置标签页
  - [ ] AISettingsTab - AI设置标签页
  - [ ] FileSettingsTab - 文件设置标签页
  - [ ] UISettingsTab - 界面设置标签页
  - [ ] AdvancedSettingsTab - 高级设置标签页

### AI模型管理窗口 (AIModelManagementWindow)
- [ ] **AIModelManagementWindow** - AI模型管理窗口
  - [ ] ModelList - 模型列表
  - [ ] ModelDetails - 模型详情
  - [ ] AddModelButton - 添加模型按钮
  - [ ] RemoveModelButton - 移除模型按钮
  - [ ] TestConnectionButton - 测试连接按钮

### 知识库管理窗口 (KnowledgeBaseWindow)
- [ ] **KnowledgeBaseWindow** - 知识库管理窗口
  - [ ] KnowledgeBaseTree - 知识库树形结构
  - [ ] FileImportPanel - 文件导入面板
  - [ ] SearchPanel - 搜索面板
  - [ ] CategoryManagement - 分类管理

### 分析报告窗口 (AnalysisReportWindow)
- [ ] **AnalysisReportWindow** - 分析报告窗口
  - [ ] ReportViewer - 报告查看器
  - [ ] ExportOptions - 导出选项
  - [ ] PrintOptions - 打印选项

## 📱 对话框组件

### 文件操作对话框
- [ ] **NewProjectDialog** - 新建项目对话框
- [ ] **OpenFileDialog** - 打开文件对话框
- [ ] **SaveAsDialog** - 另存为对话框
- [ ] **FileImportDialog** - 文件导入对话框

### 设置对话框
- [ ] **AIConfigDialog** - AI配置对话框
- [ ] **ThemeSettingsDialog** - 主题设置对话框
- [ ] **ShortcutSettingsDialog** - 快捷键设置对话框

### 信息对话框
- [ ] **AboutDialog** - 关于对话框
- [ ] **HelpDialog** - 帮助对话框
- [ ] **FeedbackDialog** - 反馈对话框

## 🎨 样式组件

### 基础样式
- [ ] **BaseStyles.xaml** - 基础样式资源字典
  - [ ] ButtonStyle - 按钮样式
  - [ ] MenuStyle - 菜单样式
  - [ ] ToolBarStyle - 工具栏样式
  - [ ] TextBoxStyle - 文本框样式
  - [ ] ListBoxStyle - 列表框样式

### 主题样式
- [ ] **LightTheme.xaml** - 浅色主题
- [ ] **DarkTheme.xaml** - 深色主题
- [ ] **ColorPalette.xaml** - 颜色调色板

### 控件样式
- [ ] **CustomControls.xaml** - 自定义控件样式
  - [ ] SideBarStyle - 侧边栏样式
  - [ ] WorkAreaStyle - 工作区域样式
  - [ ] StatusBarStyle - 状态栏样式

## 🔌 服务组件

### 配置服务
- [ ] **ConfigurationService** - 配置管理服务
- [ ] **SettingsManager** - 设置管理器

### 日志服务
- [ ] **LoggingService** - 日志记录服务
- [ ] **ExceptionHandler** - 异常处理器

### 文件服务
- [ ] **FileService** - 文件操作服务
- [ ] **ProjectService** - 项目管理服务

## 📊 数据模型

### 基础模型
- [ ] **BaseModel** - 基础模型类
- [ ] **ProjectModel** - 项目模型
- [ ] **FileModel** - 文件模型

### 配置模型
- [ ] **AppSettings** - 应用程序设置
- [ ] **AISettings** - AI设置
- [ ] **UISettings** - 界面设置

## ✅ 开发优先级

### 优先级1 (核心功能)
- [ ] 主窗口基础布局
- [ ] 菜单栏基本功能
- [ ] 工具栏基本按钮
- [ ] 侧边栏基础结构
- [ ] 工作区域容器
- [ ] 状态栏基础显示

### 优先级2 (重要功能)
- [ ] 文件操作对话框
- [ ] 设置窗口基础框架
- [ ] 基础样式系统
- [ ] 配置管理服务

### 优先级3 (增强功能)
- [ ] 主题切换功能
- [ ] 快捷键系统
- [ ] 高级样式效果
- [ ] 响应式布局优化

## 🚀 实现计划

### 第1阶段 (基础框架)
1. 创建主窗口XAML结构
2. 实现DockPanel布局
3. 创建基础样式资源

### 第2阶段 (核心组件)
1. 实现菜单栏
2. 实现工具栏
3. 实现侧边栏基础结构
4. 实现工作区域容器

### 第3阶段 (功能完善)
1. 实现状态栏
2. 创建基础对话框
3. 实现配置服务
4. 完善样式系统

### 第4阶段 (优化测试)
1. 响应式布局优化
2. 交互功能测试
3. 样式效果优化
4. 性能优化

## 📝 注意事项

1. **组件复用**: 设计可复用的组件，减少重复代码
2. **样式统一**: 保持所有组件的样式风格一致
3. **性能考虑**: 避免过度复杂的布局，保持界面响应性
4. **扩展性**: 为后续功能模块预留接口和空间
5. **测试覆盖**: 每个组件都要有相应的测试用例

## ⏸ 暂缓项（后续里程碑处理）
- [ ] 布局保存/加载/重置（AvalonDock XmlLayoutSerializer 方案）
  - 原因：反序列化兼容性问题导致 XML 解析异常
  - 临时方案：禁用持久化，改为代码构造默认布局
