<local:DockableContentBase x:Class="AINovelAgent.Views.Dockables.MainEditorView"
			 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
			 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 xmlns:local="clr-namespace:AINovelAgent.Base"
			 xmlns:vm="clr-namespace:AINovelAgent.ViewModels"
			 mc:Ignorable="d"
			 Title="编辑器" ContentId="Document.Editor"
>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <ToolBar KeyboardNavigation.IsTabStop="False">
            <ComboBox ItemsSource="{Binding AvailableFonts}" 
                      SelectedItem="{Binding SelectedFontFamily}" 
                      Width="140" 
                      SelectionChanged="FontFamilyComboBox_SelectionChanged" 
                      KeyboardNavigation.IsTabStop="False" />
            <ComboBox ItemsSource="{Binding FontSizes}" 
                      SelectedItem="{Binding SelectedFontSize}" 
                      Width="60" 
                      SelectionChanged="FontSizeComboBox_SelectionChanged" 
                      KeyboardNavigation.IsTabStop="False" />
            <Separator />
            <ToggleButton Content="B" FontWeight="Bold" Width="28" 
                          IsChecked="{Binding IsBold}" 
                          Command="{Binding ToggleBoldCommand}" 
                          KeyboardNavigation.IsTabStop="False" />
            <ToggleButton Content="I" FontStyle="Italic" Width="28" 
                          IsChecked="{Binding IsItalic}" 
                          Command="{Binding ToggleItalicCommand}" 
                          KeyboardNavigation.IsTabStop="False" />
            <ToggleButton Width="28" 
                          IsChecked="{Binding IsUnderline}" 
                          Command="{Binding ToggleUnderlineCommand}" 
                          KeyboardNavigation.IsTabStop="False">
                <TextBlock Text="U" TextDecorations="Underline" />
            </ToggleButton>
            <Separator />
            <Button Content="高亮" Command="{Binding ApplyHighlightCommand}" KeyboardNavigation.IsTabStop="False" />
            <Button Content="背景" Command="{Binding ApplyBackgroundColorCommand}" KeyboardNavigation.IsTabStop="False" />
            <Separator />
            <ComboBox ItemsSource="{Binding LineSpacings}" 
                      SelectedItem="{Binding SelectedLineSpacing}" 
                      Width="80" 
                      SelectionChanged="LineSpacingComboBox_SelectionChanged" 
                      KeyboardNavigation.IsTabStop="False" />
            <ComboBox ItemsSource="{Binding CharacterSpacings}" 
                      SelectedItem="{Binding SelectedCharacterSpacing}" 
                      Width="80" 
                      SelectionChanged="CharacterSpacingComboBox_SelectionChanged" 
                      KeyboardNavigation.IsTabStop="False" />
            <Separator />
            <Button Content="撤销" Command="ApplicationCommands.Undo" KeyboardNavigation.IsTabStop="False" />
            <Button Content="重做" Command="ApplicationCommands.Redo" KeyboardNavigation.IsTabStop="False" />
            <Separator />
            <Button Content="查找" Command="{Binding FindTextCommand}" KeyboardNavigation.IsTabStop="False" />
            <Button Content="替换" Command="{Binding ReplaceTextCommand}" KeyboardNavigation.IsTabStop="False" />
            <Separator />
            <Button Content="保存" Command="{Binding SaveDocumentCommand}" KeyboardNavigation.IsTabStop="False" />
            <Button Content="加载" Command="{Binding LoadDocumentCommand}" KeyboardNavigation.IsTabStop="False" />
        </ToolBar>
        <Grid Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <!-- 编辑区域：WPF RichTextBox富文本编辑器 -->
            <RichTextBox Grid.Row="0" Name="EditorBox" 
                         FontFamily="Microsoft YaHei" 
                         FontSize="14" 
                         VerticalScrollBarVisibility="Auto"
                         HorizontalScrollBarVisibility="Auto"
                         SelectionChanged="EditorBox_SelectionChanged" 
                         TextChanged="EditorBox_TextChanged" />
            <!-- 本地状态栏：左下角显示行列号 -->
            <StatusBar Grid.Row="1">
                <StatusBarItem>
                    <TextBlock Text="{Binding StatusText}" />
                </StatusBarItem>
            </StatusBar>
        </Grid>
    </Grid>
</local:DockableContentBase>